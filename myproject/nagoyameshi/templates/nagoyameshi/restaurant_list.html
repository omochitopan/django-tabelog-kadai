{% extends "base.html" %}
{% load humanize %}
{% block title %}トップページ{% endblock %}
{% block contents %}
<div class="list">
	<div class="outer-container">
		<div class="flex-container">
			<div class="btn focus-btn top-ref">キーワードから探す</div>
			<a href="{% url 'category' izakaya_id %}" class="btn nonfocus-btn top-ref">カテゴリから探す</a>
		</div>
		<div class="back-container">
			<form class="btn-container center" method="get" action="{% url 'list' %}">
				{% csrf_token %}
				<input class="search-box" type="text" name="query" placeholder="店舗名・エリア" value="{{ request.GET.query }}">
				<button type="submit" class="search-btn">検索</button>
			</form>
		</div>
		<div class="search-count">
			{% if object_list %}
			<p>[キーワード：{{ query }}] {{ object_list|length }}件の店舗が見つかりました</p>
			{% elif not request.GET.query %}
			<p>キーワードを入力してください</p>
			{% else %}
			<p>[キーワード：{{ query }}] お探しの店舗は見つかりませんでした</p>
			{% endif %}
		<div>
		{% for restaurant in object_list %}
		</div>
		<table class="restaurant-table">
			<tr>
				<td rowspan="4" class="image-table">
					<a href="{% url 'detail' restaurant.pk %}"><img src="{{ restaurant.image.url }}" class="restaurant-image" alt="店舗画像"></a>
				</td>
				<td class="first-row">
					<a href="{% url 'detail' restaurant.pk %}" class="restaurant-name">{{ restaurant.restaurant_name }}</a><br>
				</td>
			</tr>
			<tr>
				<td class="second-row">
					{% for category in restaurant.category_name.all %}
					<span class="category">{{ category }}　</span>
					{% endfor %}
					<div></div>
				</td>
			</tr>
			<tr>
				<td class="third-row">
					{{ restaurant.lowest_price|intcomma }}~{{ restaurant.highest_price|intcomma }}円<br>
				</td>
			</tr>
			<tr>
				<td class="fourth-row">
					{{ restaurant.description}}</p>
				</td>
			</tr>
		</table>
		{% endfor %}
	</div>
</div>
{% endblock %}