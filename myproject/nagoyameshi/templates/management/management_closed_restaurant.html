{% extends "base_management.html" %}
{% load bootstrap %}

{% block title %}店舗情報管理ページ{% endblock %}
{% block contents %}
<div class="management-restaurant">
	<div class="outer-container">
        <h2 class="center">管理店舗一覧</h2>
        <div class="search-container">
            <form method="get" action="{% url 'managementclosedrestaurant' user.pk %}">
                <label>キーワード検索</label>
				<input class="search-box" type="text" name="query" placeholder="店舗名・郵便番号(ハイフンなし)・住所" value="{{ request.GET.query }}">
                <button type="submit" class="btn strong-btn">検索</button>
            </form>
        </div>
		<div class="flex-container upper">
            <div>
                <a href="{% url 'managementopenrestaurant' user.pk %}" class="btn nonfocus-btn left-ref">営業中</a>
                <a href="" class="btn focus-btn left-ref">閉店済</a>
            </div>
            <div>
                <a href="{% url 'managementrestaurantform' user.pk %}" class="btn new-btn">＋新規店舗追加</a>
            </div>
        </div>
        <div class="inner-container">
            {% if request.GET.query %}
            <p>[キーワード：{{ request.GET.query }}]</p>
            {% endif %}
            {% include "pagination.html" %}
            <table class="management-restaurant-table">
                <tr>
                    <th class="restaurant-name">店舗名</th>
                    <th class="postal-code">郵便番号</th>
                    <th class="address">住所</th>
                    <th class="manager">店舗管理者</th>
                    <th class="reservationlist"></th>
                    <th class="sales"></th>
                </tr>
                {% for object in object_list %}
                <tr>
                    <td><a href="{% url 'managementrestaurantdetail' user.pk object.restaurant.pk %}" class="ref">{{ object.restaurant.restaurant_name }}</a></td>
                    <td>{{ object.restaurant.postal_code|slice:":3" }}-{{ object.restaurant.postal_code|slice:"3:" }}</td>
                    <td>{{ object.restaurant.address }}</td>
                    <td>
                        {% for manager in object.restaurant.managers.all %}
                        <span><a href="{% url 'managementmanagerdetail' user.pk manager.pk %}" class="ref">{{ manager.name }}</a>　</span>
                        {% endfor %}
                    </td>
                    <td class="center"><a href="{% url 'managementreservationrestaurant' user.pk object.restaurant.pk %}" class="btn strong-btn">予約一覧</a></td>
                    <td class="center"><a href="" class="btn strong-btn">売上</a></td>
                </tr>
                {% endfor %}
            </table>
        </div>
		<div class="flex-container btn-container">
            <a href="{% url 'management' user.pk %}" class="btn thin-btn one-btn">管理トップに戻る</a>
        </div>
	</div>
</div>
{% endblock %}