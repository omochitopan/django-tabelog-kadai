{% extends "base.html" %}

{% block title %}レビュー一覧ページ{% endblock %}
{% block contents %}
<div class="reviewlist">
	<div class="outer-container">
		<h2 class="restaurant-name">{{ restaurant_name }}</h2>
		<div class="flex-container ref-container">
			<a href="{% url 'detail' restaurant_id %}" class="btn non-focus left-align">店舗情報</a>
			<a href="{% url 'reservationcreate' restaurant_id %}" class="btn non-focus left-align">予約フォーム</a>
			<a href="" class="btn focus left-align">レビュー</a>
		</div>
		<p class="average">平均：{{ average_score }}点（{{ target_reviews|length }}件）</p>
		{% if not target_reviews %}
		<table class="review-table">
			<tr>
				<td class="noreview">このレストランのレビューはまだありません。</td>
			</tr>
		</table>
		{% else %}
		{% for review in target_reviews %}
		<table class="review-table">
			<tr class="user-name-index">
				<td class="user-name">{{ review.user.nick_name }}<span class="san"> さん</span></td>
			</tr>
			<tr>
				{% if review.score == 1 %}
				<td class="star">★<span class="notstar">★★★★</span></td>
				{% elif review.score == 2 %}
				<td class="star">★★<span class="notstar">★★★</span></td>
				{% elif review.score == 3 %}
				<td class="star">★★★<span class="notstar">★★</span></td>
				{% elif review.score == 4 %}
				<td class="star">★★★★<span class="notstar">★</span></td>
				{% elif review.score == 5 %}
				<td class="star">★★★★★</td>
				{% endif %}
			</tr>
			<tr>
				<td class="content">{{ review.content }}</td>
			</tr>
			<tr>
				<td class="update">日時：{{ review.updated_at }}</td>
			</tr>
		</table>
		{% endfor %}
		{% endif %}
		{% if not writtenreview %}
		<p class="reviewcheck">あなたはこのレストランにまだレビューしていません。</p>
		<div class="flex-container btn-container">
			<a href="{% url 'reviewcreate' restaurant_id %}" class= "btn submit">レビューを投稿</a>
		</div>
		{% else %}
		<p class="reviewcheck">あなたはこのレストランにレビュー済みです。</p>
		<div class="flex-container btn-container">
			<a href="{% url 'reviewupdate' writtenreview.pk %}" class= "btn submit">レビューを編集</a>
			<a href="{% url 'reviewdelete' writtenreview.pk %}" class= "btn submit">レビューを削除</a>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}